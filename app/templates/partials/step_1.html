<div id="area1">
    <div class="container-fluid">
        <h2 class="h3 mb-4">Step 1: Develop a Conceptual Definition of the Construct</h2>
        
        <!-- Panel 1: Construct Name Input -->
        <div class="card mb-4" id="step1panel1">
            <div class="card-body">
                <h4 class="card-title mb-3">Construct Name</h4>
                <input type="text" 
                class="form-control" 
                id="constructName" 
                name="constructName"
                placeholder="e.g., Self-Efficacy, Job Satisfaction, Emotional Intelligence"
                maxlength="100">
                <div class="form-text text-muted mb-4">Enter the name of the psychological construct you want to measure.</div>
                <h4 class="card-title mb-3">Rough Initial Definition</h4>
                <div class="mb-3">
                    <textarea class="form-control" 
                              id="initialDefinition" 
                              name="initialDefinition"
                              rows="6"
                              placeholder="Describe what this construct represents, its key characteristics, and what it measures. For example: 'Self-efficacy refers to an individual's belief in their capacity to execute behaviors necessary to produce specific performance attainments.'"></textarea>
                    <div class="form-text text-muted">Provide a working definition that captures the essence of your construct. This can be refined later.</div>
                </div>
                <div class="row">
                    <div class="col-auto ms-auto">
                        <button class="btn btn-primary" id="saveContinueButton" onclick="saveConstructData()" aria-label="Save and continue" title="Save and continue" data-bs-toggle="tooltip" data-bs-placement="top">
                            <i class="bi bi-check-lg"></i>
                        </button>
                    </div>
                </div>       
            </div>
        </div>

        <!-- Panel 2: Compare Definitions -->
        <div class="card mb-4 d-none" id="step1panel2">
            <div class="card-body">
                <h4 class="card-title mb-3">Choose Definitions</h4>
                <!-- Container for displaying academic definitions as cards -->
                 <div class="row my-3">
                     <div class="col-auto ms-auto p-0">
                         <button class="btn btn-outline-info" id="generateMoreButton" onclick="getDefinitionsMore()" aria-label="Generate More" title="Generate More" data-bs-toggle="tooltip" data-bs-placement="top">
                             <i class="bi bi-plus-lg"></i>
                         </button>
                     </div>
                     <div class="col-auto ps-2">
                         <button class="btn btn-outline-info" id="tryAgainButton" onclick="getDefinitionsAgain()" aria-label="Generate New Definitions" title="Generate New Definitions" data-bs-toggle="tooltip" data-bs-placement="top">
                             <i class="bi bi-arrow-clockwise"></i>
                         </button>
                     </div>
                 </div>
                <div id="definitionsContainer" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3"></div>
                <div class="row my-3">
                    <div class="col-auto ms-auto">
                        <!-- button to choose selected definition -->
                        <button class="btn btn-primary d-none" id="chooseDefinitionButton" onclick="chooseDefinition()" aria-label="Select Definition" title="Select Definition" data-bs-toggle="tooltip" data-bs-placement="top">
                            <i class="bi bi-check-lg"></i>
                        </button>
                        <!-- Button to merge Selected -->
                        <button class="btn btn-info d-none" id="mergeDefinitionsButton" onclick="chooseDefinition()" aria-label="Merge Definitions" title="Merge Definitions" data-bs-toggle="tooltip" data-bs-placement="top">
                            <i class="bi bi-union"></i>
                        </button>
                    </div>
                </div>
                <div id="resultingDefinitionContainer" class="d-none">
                    <h4 class="card-title mb-3">Edit Your Definition</h4>
                    <textarea class="form-control my-3" 
                    id="resultingDefinitionTextarea" 
                    name="resultingDefinition"
                    rows="6"></textarea>
                    <div class="row mb-3">
                        <!-- button to choose selected definition -->
                        <div class="col-auto ms-auto">
                            <button class="btn btn-primary" id="saveDefinitionButton" onclick="saveDefinition()" aria-label="Save Definition" title="Save Definition" data-bs-toggle="tooltip" data-bs-placement="top">
                                <i class="bi bi-floppy2"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Panel 3: Conceptual Domain -->
        <div class="card mb-4 d-none" id="step1panel3">
            <div class="card-body">
                <h2 class="mb-4">Specify Construct's Conceptual Domain</h2>
                <button class="btn btn-outline-info my-3" id="aiSuggestionButton" onclick="getAISuggestion()" aria-label="Get AI Suggestion" title="Get AI Suggestion" data-bs-toggle="tooltip" data-bs-placement="top">
                    <i class="bi bi-lightbulb"></i>
                </button>
                <div class="row mb-4 d-none" id="aiSuggestion">
                    <div class="container-fluid">
                        <div class="card text-bg-light">
                            <div class="card-body">
                                <div class="row">
                                    <p id="aiSuggestionText"></p>
                                </div>
                                <div class="row">
                                    <div class="col-auto ms-auto">
                                        <button class="btn btn-outline-secondary" onclick="takeAISuggestion()">Take</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Conceptual Domain -->
                <div class="mb-4">
                <label class="form-label fw-bold">1. What general type of property does your construct represent?</label>
                <div id="propertyOptions">
                    <div class="form-check"><input class="form-check-input" type="radio" name="property" value="Thought" id="propertyThought"><label class="form-check-label" for="propertyThought">Thought (e.g., belief, intention)</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="property" value="Feeling" id="propertyFeeling"><label class="form-check-label" for="propertyFeeling">Feeling (e.g., emotion, attitude)</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="property" value="Perception" id="propertyPerception"><label class="form-check-label" for="propertyPerception">Perception (e.g., perceived usefulness)</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="property" value="Action" id="propertyAction"><label class="form-check-label" for="propertyAction">Action (e.g., behavior, activity)</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="property" value="Outcome" id="propertyOutcome"><label class="form-check-label" for="propertyOutcome">Outcome (e.g., performance, ROI)</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="property" value="Intrinsic Characteristic" id="propertyIntrinsic"><label class="form-check-label" for="propertyIntrinsic">Intrinsic Characteristic (e.g., intelligence)</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="property" value="Other" id="propertyOther"><label class="form-check-label" for="propertyOther">Other</label></div>
                </div>
                <textarea class="form-control mt-2" id="propertyExplanation" rows="2" placeholder="If unsure or selected 'Other', explain here (optional)"></textarea>
                </div>

                <!-- Referent Entity -->
                <div class="mb-4">
                <label class="form-label fw-bold">2. To what kind of entity does your construct apply?</label>
                <div id="entityOptions">
                    <div class="form-check"><input class="form-check-input" type="radio" name="entity" value="Individual" id="entityIndividual"><label class="form-check-label" for="entityIndividual">Individual</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="entity" value="Group" id="entityGroup"><label class="form-check-label" for="entityGroup">Group / Team</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="entity" value="Organization" id="entityOrganization"><label class="form-check-label" for="entityOrganization">Organization</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="entity" value="Technology" id="entityTech"><label class="form-check-label" for="entityTech">Technology / Artifact</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="entity" value="Situation" id="entitySituation"><label class="form-check-label" for="entitySituation">Situation / Task</label></div>
                    <div class="form-check"><input class="form-check-input" type="radio" name="entity" value="Other" id="entityOther"><label class="form-check-label" for="entityOther">Other</label></div>
                </div>
                <textarea class="form-control mt-2" id="entityExplanation" rows="2" placeholder="If unsure or selected 'Other', explain here (optional)"></textarea>
                </div>

                <!-- Submit -->
                <div class="row my-3">
                    <div class="col-auto ms-auto">
                        <button class="btn btn-primary" id="submitDomainButton" onclick="submitDomain()" aria-label="Select Conceptual Domain" title="Select Conceptual Domain" data-bs-toggle="tooltip" data-bs-placement="top">
                            <i class="bi bi-check-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', path='js/step1.js') }}" defer></script>
